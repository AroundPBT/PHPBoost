/*! jQuery Mobile v1.4.5 | Copyright 2010, 2014 jQuery Foundation, Inc. | jquery.org/license */

(function(e,t,n){typeof define=="function"&&define.amd?define(["jquery"],function(r){return n(r,e,t),r.mobile}):n(e.jQuery,e,t)})(this,document,function(e,t,n,r){(function(e,t,n,r){function T(e){while(e&&typeof e.originalEvent!="undefined")e=e.originalEvent;return e}function N(t,n){var i=t.type,s,o,a,l,c,h,p,d,v;t=e.Event(t),t.type=n,s=t.originalEvent,o=e.event.props,i.search(/^(mouse|click)/)>-1&&(o=f);if(s)for(p=o.length,l;p;)l=o[--p],t[l]=s[l];i.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1);if(i.search(/^touch/)!==-1){a=T(s),i=a.touches,c=a.changedTouches,h=i&&i.length?i[0]:c&&c.length?c[0]:r;if(h)for(d=0,v=u.length;d<v;d++)l=u[d],t[l]=h[l]}return t}function C(t){var n={},r,s;while(t){r=e.data(t,i);for(s in r)r[s]&&(n[s]=n.hasVirtualBinding=!0);t=t.parentNode}return n}function k(t,n){var r;while(t){r=e.data(t,i);if(r&&(!n||r[n]))return t;t=t.parentNode}return null}function L(){g=!1}function A(){g=!0}function O(){E=0,v.length=0,m=!1,A()}function M(){L()}function _(){D(),c=setTimeout(function(){c=0,O()},e.vmouse.resetTimerDuration)}function D(){c&&(clearTimeout(c),c=0)}function P(t,n,r){var i;if(r&&r[t]||!r&&k(n.target,t))i=N(n,t),e(n.target).trigger(i);return i}function H(t){var n=e.data(t.target,s),r;!m&&(!E||E!==n)&&(r=P("v"+t.type,t),r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function B(t){var n=T(t).touches,r,i,o;n&&n.length===1&&(r=t.target,i=C(r),i.hasVirtualBinding&&(E=w++,e.data(r,s,E),D(),M(),d=!1,o=T(t).touches[0],h=o.pageX,p=o.pageY,P("vmouseover",t,i),P("vmousedown",t,i)))}function j(e){if(g)return;d||P("vmousecancel",e,C(e.target)),d=!0,_()}function F(t){if(g)return;var n=T(t).touches[0],r=d,i=e.vmouse.moveDistanceThreshold,s=C(t.target);d=d||Math.abs(n.pageX-h)>i||Math.abs(n.pageY-p)>i,d&&!r&&P("vmousecancel",t,s),P("vmousemove",t,s),_()}function I(e){if(g)return;A();var t=C(e.target),n,r;P("vmouseup",e,t),d||(n=P("vclick",e,t),n&&n.isDefaultPrevented()&&(r=T(e).changedTouches[0],v.push({touchID:E,x:r.clientX,y:r.clientY}),m=!0)),P("vmouseout",e,t),d=!1,_()}function q(t){var n=e.data(t,i),r;if(n)for(r in n)if(n[r])return!0;return!1}function R(){}function U(t){var n=t.substr(1);return{setup:function(){q(this)||e.data(this,i,{});var r=e.data(this,i);r[t]=!0,l[t]=(l[t]||0)+1,l[t]===1&&b.bind(n,H),e(this).bind(n,R),y&&(l.touchstart=(l.touchstart||0)+1,l.touchstart===1&&b.bind("touchstart",B).bind("touchend",I).bind("touchmove",F).bind("scroll",j))},teardown:function(){--l[t],l[t]||b.unbind(n,H),y&&(--l.touchstart,l.touchstart||b.unbind("touchstart",B).unbind("touchmove",F).unbind("touchend",I).unbind("scroll",j));var r=e(this),s=e.data(this,i);s&&(s[t]=!1),r.unbind(n,R),q(this)||r.removeData(i)}}}var i="virtualMouseBindings",s="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),u="clientX clientY pageX pageY screenX screenY".split(" "),a=e.event.mouseHooks?e.event.mouseHooks.props:[],f=e.event.props.concat(a),l={},c=0,h=0,p=0,d=!1,v=[],m=!1,g=!1,y="addEventListener"in n,b=e(n),w=1,E=0,S,x;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(x=0;x<o.length;x++)e.event.special[o[x]]=U(o[x]);y&&n.addEventListener("click",function(t){var n=v.length,r=t.target,i,o,u,a,f,l;if(n){i=t.clientX,o=t.clientY,S=e.vmouse.clickDistanceThreshold,u=r;while(u){for(a=0;a<n;a++){f=v[a],l=0;if(u===r&&Math.abs(f.x-i)<S&&Math.abs(f.y-o)<S||e.data(u,s)===f.touchID){t.preventDefault(),t.stopPropagation();return}}u=u.parentNode}}},!0)})(e,t,n),function(e){e.mobile={}}(e),function(e,t){var r={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,r),e.extend(e.mobile.support,r)}(e),function(e,t,r){function l(t,n,i,s){var o=i.type;i.type=n,s?e.event.trigger(i,r,t):e.event.dispatch.call(t,i),i.type=o}var i=e(n),s=e.mobile.support.touch,o="touchmove scroll",u=s?"touchstart":"mousedown",a=s?"touchend":"mouseup",f=s?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)}),e.event.special.scrollstart={enabled:!0,setup:function(){function s(e,n){r=n,l(t,r?"scrollstart":"scrollstop",e)}var t=this,n=e(t),r,i;n.bind(o,function(t){if(!e.event.special.scrollstart.enabled)return;r||s(t,!0),clearTimeout(i),i=setTimeout(function(){s(t,!1)},50)})},teardown:function(){e(this).unbind(o)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,n=e(t),r=!1;n.bind("vmousedown",function(s){function a(){clearTimeout(u)}function f(){a(),n.unbind("vclick",c).unbind("vmouseup",a),i.unbind("vmousecancel",f)}function c(e){f(),!r&&o===e.target?l(t,"tap",e):r&&e.preventDefault()}r=!1;if(s.which&&s.which!==1)return!1;var o=s.target,u;n.bind("vmouseup",a).bind("vclick",c),i.bind("vmousecancel",f),u=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(r=!0),l(t,"taphold",e.Event("taphold",{target:o}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),i.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var n=t.pageXOffset,r=t.pageYOffset,i=e.clientX,s=e.clientY;if(e.pageY===0&&Math.floor(s)>Math.floor(e.pageY)||e.pageX===0&&Math.floor(i)>Math.floor(e.pageX))i-=n,s-=r;else if(s<e.pageY-r||i<e.pageX-n)i=e.pageX-n,s=e.pageY-r;return{x:i,y:s}},start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y],origin:e(t.target)}},stop:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y]}},handleSwipe:function(t,n,r,i){if(n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var s=t.coords[0]>n.coords[0]?"swipeleft":"swiperight";return l(r,"swipe",e.Event("swipe",{target:i,swipestart:t,swipestop:n}),!0),l(r,s,e.Event(s,{target:i,swipestart:t,swipestop:n}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,n=this,r=e(n),s={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=s,s.start=function(t){if(e.event.special.swipe.eventInProgress)return;e.event.special.swipe.eventInProgress=!0;var r,o=e.event.special.swipe.start(t),u=t.target,l=!1;s.move=function(t){if(!o||t.isDefaultPrevented())return;r=e.event.special.swipe.stop(t),l||(l=e.event.special.swipe.handleSwipe(o,r,n,u),l&&(e.event.special.swipe.eventInProgress=!1)),Math.abs(o.coords[0]-r.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()},s.stop=function(){l=!0,e.event.special.swipe.eventInProgress=!1,i.off(f,s.move),s.move=null},i.on(f,s.move).one(a,s.stop)},r.on(u,s.start)},teardown:function(){var t,n;t=e.data(this,"mobile-events"),t&&(n=t.swipe,delete t.swipe,t.length--,t.length===0&&e.removeData(this,"mobile-events")),n&&(n.start&&e(this).off(u,n.start),n.move&&i.off(f,n.move),n.stop&&i.off(a,n.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)},teardown:function(){e(this).unbind(n)}}})}(e,this)});

/*! Lightcase v2.1.0 | Copyright 2015 Cornel Boppart */
!function(t){window.lightcase={cache:{},support:{},init:function(e){return this.each(function(){t(this).unbind("click").click(function(i){i.preventDefault(),t(this).lightcase("start",e)})})},start:function(e){lightcase.settings=t.extend(!0,{idPrefix:"lightcase-",classPrefix:"lightcase-",labels:{errorMessage:"Source could not be found...","sequenceInfo.of":" of ",close:"Close","navigator.prev":"Prev","navigator.next":"Next","navigator.play":"Play","navigator.pause":"Pause"},transition:"elastic",transitionIn:null,transitionOut:null,cssTransitions:!0,speedIn:250,speedOut:250,maxWidth:800,maxHeight:500,forceWidth:!1,forceHeight:!1,liveResize:!0,fullScreenModeForMobile:!0,mobileMatchExpression:/(iphone|ipod|ipad|android|blackberry|symbian)/,disableShrink:!1,shrinkFactor:.75,overlayOpacity:.9,slideshow:!1,timeout:5e3,swipe:!0,useKeys:!0,navigateEndless:!0,closeOnOverlayClick:!0,title:null,caption:null,showTitle:!0,showCaption:!0,showSequenceInfo:!0,inline:{width:"auto",height:"auto"},ajax:{width:"auto",height:"auto",type:"get",dataType:"html",data:{}},iframe:{width:800,height:500,frameborder:0},flash:{width:400,height:205,wmode:"transparent"},video:{width:400,height:225,poster:"",preload:"auto",controls:!0,autobuffer:!0,autoplay:!0,loop:!1},attr:"data-rel",href:null,type:null,typeMapping:{image:"jpg,jpeg,gif,png,bmp",flash:"swf",video:"mp4,mov,ogv,ogg,webm",iframe:"html,php",ajax:"json,txt",inline:"#"},errorMessage:function(){return'<p class="'+lightcase.settings.classPrefix+'error">'+lightcase.settings.labels.errorMessage+"</p>"},markup:function(){t("body").append($overlay=t('<div id="'+lightcase.settings.idPrefix+'overlay"></div>'),$loading=t('<div id="'+lightcase.settings.idPrefix+'loading" class="'+lightcase.settings.classPrefix+'icon-spin"></div>'),$case=t('<div id="'+lightcase.settings.idPrefix+'case" aria-hidden="true" role="dialog"></div>')),$case.after($nav=t('<div id="'+lightcase.settings.idPrefix+'nav"></div>')),$nav.append($close=t('<a href="#" class="'+lightcase.settings.classPrefix+'icon-close"><span>'+lightcase.settings.labels.close+"</span></a>"),$prev=t('<a href="#" class="'+lightcase.settings.classPrefix+'icon-prev"><span>'+lightcase.settings.labels["navigator.prev"]+"</span></a>").hide(),$next=t('<a href="#" class="'+lightcase.settings.classPrefix+'icon-next"><span>'+lightcase.settings.labels["navigator.next"]+"</span></a>").hide(),$play=t('<a href="#" class="'+lightcase.settings.classPrefix+'icon-play"><span>'+lightcase.settings.labels["navigator.play"]+"</span></a>").hide(),$pause=t('<a href="#" class="'+lightcase.settings.classPrefix+'icon-pause"><span>'+lightcase.settings.labels["navigator.pause"]+"</span></a>").hide()),$case.append($content=t('<div class="'+lightcase.settings.classPrefix+'content"></div>'),$info=t('<div class="'+lightcase.settings.classPrefix+'info"></div>')),$content.append($contentInner=t('<div class="'+lightcase.settings.classPrefix+'contentInner"></div>')),$info.append($sequenceInfo=t('<div class="'+lightcase.settings.classPrefix+'sequenceInfo"></div>'),$title=t('<h4 class="'+lightcase.settings.classPrefix+'title"></h4>'),$caption=t('<p class="'+lightcase.settings.classPrefix+'caption"></p>'))},onInit:{},onStart:{},onFinish:{},onClose:{},onCleanup:{}},e),lightcase.callHooks(lightcase.settings.onInit),lightcase.objectData=lightcase.getObjectData(this),lightcase.cacheScrollPosition(),lightcase.watchScrollInteraction(),lightcase.addElements(),lightcase.lightcaseOpen(),lightcase.dimensions=lightcase.getDimensions()},getObjectData:function(e){var i={$link:e,title:lightcase.settings.title||e.attr("title"),caption:lightcase.settings.caption||e.children("img").attr("alt"),url:lightcase.verifyDataUrl(lightcase.settings.href||e.attr("data-href")||e.attr("href")),requestType:lightcase.settings.ajax.type,requestData:lightcase.settings.ajax.data,requestDataType:lightcase.settings.ajax.dataType,rel:e.attr(lightcase.settings.attr),type:lightcase.settings.type||lightcase.verifyDataType(e.attr("data-href")||e.attr("href")),isPartOfSequence:lightcase.isPartOfSequence(e.attr(lightcase.settings.attr),":"),isPartOfSequenceWithSlideshow:lightcase.isPartOfSequence(e.attr(lightcase.settings.attr),":slideshow"),currentIndex:t("["+lightcase.settings.attr+'="'+e.attr(lightcase.settings.attr)+'"]').index(e),sequenceLength:t("["+lightcase.settings.attr+'="'+e.attr(lightcase.settings.attr)+'"]').length};return i.sequenceInfo=i.currentIndex+1+lightcase.settings.labels["sequenceInfo.of"]+i.sequenceLength,i},isPartOfSequence:function(e,i){var s=t("["+lightcase.settings.attr+'="'+e+'"]'),a=new RegExp(i);return a.test(e)&&s.length>1?!0:!1},isSlideshowEnabled:function(){return!lightcase.objectData.isPartOfSequence||lightcase.settings.slideshow!==!0&&lightcase.objectData.isPartOfSequenceWithSlideshow!==!0?!1:!0},loadContent:function(){lightcase.cache.originalObject&&lightcase.restoreObject(),lightcase.createObject()},createObject:function(){var e;switch(lightcase.objectData.type){case"image":e=t(new Image),e.attr({src:lightcase.objectData.url,alt:lightcase.objectData.title});break;case"inline":e=t('<div class="'+lightcase.settings.classPrefix+'inlineWrap"></div>'),e.html(lightcase.cloneObject(t(lightcase.objectData.url))),t.each(lightcase.settings.inline,function(t,i){e.attr("data-"+t,i)});break;case"ajax":e=t('<div class="'+lightcase.settings.classPrefix+'inlineWrap"></div>'),t.each(lightcase.settings.ajax,function(t,i){"data"!==t&&e.attr("data-"+t,i)});break;case"flash":e=t('<embed src="'+lightcase.objectData.url+'" type="application/x-shockwave-flash"></embed>'),t.each(lightcase.settings.flash,function(t,i){e.attr(t,i)});break;case"video":e=t("<video></video>"),e.attr("src",lightcase.objectData.url),t.each(lightcase.settings.video,function(t,i){e.attr(t,i)});break;default:e=t("<iframe></iframe>"),e.attr({src:lightcase.objectData.url}),t.each(lightcase.settings.iframe,function(t,i){e.attr(t,i)})}lightcase.addObject(e),lightcase.loadObject(e)},addObject:function(t){$contentInner.html(t),lightcase.loading("start"),lightcase.callHooks(lightcase.settings.onStart),lightcase.settings.showSequenceInfo===!0&&lightcase.objectData.isPartOfSequence?($sequenceInfo.html(lightcase.objectData.sequenceInfo),$sequenceInfo.show()):($sequenceInfo.empty(),$sequenceInfo.hide()),lightcase.settings.showTitle===!0&&void 0!==lightcase.objectData.title&&""!==lightcase.objectData.title?($title.html(lightcase.objectData.title),$title.show()):($title.empty(),$title.hide()),lightcase.settings.showCaption===!0&&void 0!==lightcase.objectData.caption&&""!==lightcase.objectData.caption?($caption.html(lightcase.objectData.caption),$caption.show()):($caption.empty(),$caption.hide())},loadObject:function(e){switch(lightcase.objectData.type){case"inline":t(lightcase.objectData.url)?lightcase.showContent(e):lightcase.error();break;case"ajax":t.ajax(t.extend({},lightcase.settings.ajax,{url:lightcase.objectData.url,type:lightcase.objectData.requestType,dataType:lightcase.objectData.requestDataType,data:lightcase.objectData.requestData,success:function(t){"json"===lightcase.objectData.requestDataType?lightcase.objectData.data=t:e.html(t),lightcase.showContent(e)},error:function(){lightcase.error()}}));break;case"flash":lightcase.showContent(e);break;case"video":"function"==typeof e.get(0).canPlayType||0===$case.find("video").length?lightcase.showContent(e):lightcase.error();break;default:lightcase.objectData.url?(e.load(function(){lightcase.showContent(e)}),e.error(function(){lightcase.error()})):lightcase.error()}},error:function(){lightcase.objectData.type="error";var e=t('<div class="'+lightcase.settings.classPrefix+'inlineWrap"></div>');e.html(lightcase.settings.errorMessage),$contentInner.html(e),lightcase.showContent($contentInner)},calculateDimensions:function(t){lightcase.cleanupDimensions();var e={objectWidth:t.attr(t.attr("width")?"width":"data-width"),objectHeight:t.attr(t.attr("height")?"height":"data-height"),maxWidth:parseInt(lightcase.dimensions.windowWidth*lightcase.settings.shrinkFactor),maxHeight:parseInt(lightcase.dimensions.windowHeight*lightcase.settings.shrinkFactor)};if(!lightcase.settings.disableShrink)switch(e.maxWidth>lightcase.settings.maxWidth&&(e.maxWidth=lightcase.settings.maxWidth),e.maxHeight>lightcase.settings.maxHeight&&(e.maxHeight=lightcase.settings.maxHeight),e.differenceWidthAsPercent=parseInt(100/e.maxWidth*e.objectWidth),e.differenceHeightAsPercent=parseInt(100/e.maxHeight*e.objectHeight),lightcase.objectData.type){case"image":case"flash":case"video":e.differenceWidthAsPercent>100&&e.differenceWidthAsPercent>e.differenceHeightAsPercent&&(e.objectWidth=e.maxWidth,e.objectHeight=parseInt(e.objectHeight/e.differenceWidthAsPercent*100)),e.differenceHeightAsPercent>100&&e.differenceHeightAsPercent>e.differenceWidthAsPercent&&(e.objectWidth=parseInt(e.objectWidth/e.differenceHeightAsPercent*100),e.objectHeight=e.maxHeight),e.differenceHeightAsPercent>100&&e.differenceWidthAsPercent<e.differenceHeightAsPercent&&(e.objectWidth=parseInt(e.maxWidth/e.differenceHeightAsPercent*e.differenceWidthAsPercent),e.objectHeight=e.maxHeight);break;case"error":!isNaN(e.objectWidth)&&e.objectWidth>e.maxWidth&&(e.objectWidth=e.maxWidth);break;default:(isNaN(e.objectWidth)||e.objectWidth>e.maxWidth)&&!lightcase.settings.forceWidth&&(e.objectWidth=e.maxWidth),(isNaN(e.objectHeight)&&"auto"!==e.objectHeight||e.objectHeight>e.maxHeight)&&!lightcase.settings.forceHeight&&(e.objectHeight=e.maxHeight)}lightcase.adjustDimensions(t,e)},adjustDimensions:function(t,e){t.css({width:e.objectWidth,height:e.objectHeight,"max-width":t.attr("data-max-width")?t.attr("data-max-width"):e.maxWidth,"max-height":t.attr("data-max-height")?t.attr("data-max-height"):e.maxHeight}),$contentInner.css({width:t.outerWidth(),height:t.outerHeight(),"max-width":"100%"}),$case.css({width:$contentInner.outerWidth()}),$case.css({"margin-top":parseInt(-($case.outerHeight()/2)),"margin-left":parseInt(-($case.outerWidth()/2))})},loading:function(t){"start"===t?($case.addClass(lightcase.settings.classPrefix+"loading"),$loading.show()):"end"===t&&($case.removeClass(lightcase.settings.classPrefix+"loading"),$loading.hide())},getDimensions:function(){return{windowWidth:t(window).innerWidth(),windowHeight:t(window).innerHeight()}},verifyDataUrl:function(t){return t&&void 0!==t&&""!==t?(t.indexOf("#")>-1&&(t=t.split("#"),t="#"+t[t.length-1]),t.toString()):!1},verifyDataType:function(t){var t=lightcase.verifyDataUrl(t),e=lightcase.settings.typeMapping;if(t)for(var i in e)for(var s=e[i].split(","),a=0;a<s.length;a++){var c=s[a],n=new RegExp(".("+c+")$","i"),l=t.split("?")[0].substr(-5);if(n.test(l)===!0)return i;if("inline"===i&&(t.indexOf(c)>-1||!t))return i}return"iframe"},addElements:function(){"undefined"!=typeof $case&&t("#"+$case.attr("id")).length||lightcase.settings.markup()},showContent:function(t){switch($case.attr("data-type",lightcase.objectData.type),lightcase.cache.object=t,lightcase.calculateDimensions(t),lightcase.callHooks(lightcase.settings.onFinish),lightcase.settings.transitionIn){case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollHorizontal":case"scrollVertical":lightcase.transition.scroll($case,"in",lightcase.settings.speedIn),lightcase.transition.fade($contentInner,"in",lightcase.settings.speedIn);break;case"elastic":$case.css("opacity")<1&&(lightcase.transition.zoom($case,"in",lightcase.settings.speedIn),lightcase.transition.fade($contentInner,"in",lightcase.settings.speedIn));case"fade":case"fadeInline":lightcase.transition.fade($case,"in",lightcase.settings.speedIn),lightcase.transition.fade($contentInner,"in",lightcase.settings.speedIn);break;default:lightcase.transition.fade($case,"in",0)}lightcase.loading("end"),lightcase.busy=!1},processContent:function(){switch(lightcase.busy=!0,lightcase.settings.transitionOut){case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollVertical":case"scrollHorizontal":$case.is(":hidden")?(lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()}),lightcase.transition.fade($contentInner,"out",0)):lightcase.transition.scroll($case,"out",lightcase.settings.speedOut,function(){lightcase.loadContent()});break;case"fade":$case.is(":hidden")?lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()}):lightcase.transition.fade($case,"out",lightcase.settings.speedOut,0,function(){lightcase.loadContent()});break;case"fadeInline":case"elastic":$case.is(":hidden")?lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()}):lightcase.transition.fade($contentInner,"out",lightcase.settings.speedOut,0,function(){lightcase.loadContent()});break;default:lightcase.transition.fade($case,"out",0,0,function(){lightcase.loadContent()})}},handleEvents:function(){lightcase.unbindEvents(),$nav.children().not($close).hide(),lightcase.isSlideshowEnabled()&&($nav.hasClass(lightcase.settings.classPrefix+"paused")?lightcase.stopTimeout():lightcase.startTimeout()),lightcase.settings.liveResize&&lightcase.watchResizeInteraction(),$close.click(function(t){t.preventDefault(),lightcase.lightcaseClose()}),lightcase.settings.closeOnOverlayClick===!0&&$overlay.css("cursor","pointer").click(function(t){t.preventDefault(),lightcase.lightcaseClose()}),lightcase.settings.useKeys===!0&&lightcase.addKeyEvents(),lightcase.objectData.isPartOfSequence&&($nav.attr("data-ispartofsequence",!0),lightcase.nav=lightcase.setNavigation(),$prev.click(function(t){t.preventDefault(),$prev.unbind("click"),lightcase.cache.action="prev",lightcase.nav.$prevItem.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()}),$next.click(function(t){t.preventDefault(),$next.unbind("click"),lightcase.cache.action="next",lightcase.nav.$nextItem.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()}),lightcase.isSlideshowEnabled()&&($play.click(function(t){t.preventDefault(),lightcase.startTimeout()}),$pause.click(function(t){t.preventDefault(),lightcase.stopTimeout()})),lightcase.settings.swipe===!0&&(t.isPlainObject(t.event.special.swipeleft)&&$case.on("swipeleft",function(t){t.preventDefault(),$next.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()}),t.isPlainObject(t.event.special.swiperight)&&$case.on("swiperight",function(t){t.preventDefault(),$prev.click(),lightcase.isSlideshowEnabled()&&lightcase.stopTimeout()})))},addKeyEvents:function(){t(document).keyup(function(t){if(!lightcase.busy)switch(t.keyCode){case 27:$close.click();break;case 37:lightcase.objectData.isPartOfSequence&&$prev.click();break;case 39:lightcase.objectData.isPartOfSequence&&$next.click()}})},startTimeout:function(){$play.hide(),$pause.show(),lightcase.cache.action="next",$nav.removeClass(lightcase.settings.classPrefix+"paused"),lightcase.timeout=setTimeout(function(){lightcase.nav.$nextItem.click()},lightcase.settings.timeout)},stopTimeout:function(){$play.show(),$pause.hide(),$nav.addClass(lightcase.settings.classPrefix+"paused"),clearTimeout(lightcase.timeout)},setNavigation:function(){var e=t("["+lightcase.settings.attr+'="'+lightcase.objectData.rel+'"]'),i=lightcase.objectData.currentIndex,s=i-1,a=i+1,c=lightcase.objectData.sequenceLength-1,n={$prevItem:e.eq(s),$nextItem:e.eq(a)};return i>0?$prev.show():n.$prevItem=e.eq(c),c>=a?$next.show():n.$nextItem=e.eq(0),lightcase.settings.navigateEndless===!0&&($prev.show(),$next.show()),n},cloneObject:function(t){var e=t.clone(),i=t.attr("id");return t.is(":hidden")?(lightcase.cacheObjectData(t),t.attr("id",lightcase.settings.idPrefix+"temp-"+i).empty()):e.removeAttr("id"),e.show()},isMobileDevice:function(){var t=navigator.userAgent.toLowerCase(),e=t.match(lightcase.settings.mobileMatchExpression);return e?!0:!1},isTransitionSupported:function(){var e=t("body").get(0),i=!1,s={transition:"",WebkitTransition:"-webkit-",MozTransition:"-moz-",OTransition:"-o-",MsTransition:"-ms-"};for(var a in s)s.hasOwnProperty(a)&&a in e.style&&(lightcase.support.transition=s[a],i=!0);return i},transition:{fade:function(t,e,i,s,a){var c="in"===e,n={},l=t.css("opacity"),o={},r=s?s:c?1:0;(lightcase.open||!c)&&(n.opacity=l,o.opacity=r,t.css(n).show(),lightcase.support.transitions?(o[lightcase.support.transition+"transition"]=i+"ms ease",setTimeout(function(){t.css(o),setTimeout(function(){t.css(lightcase.support.transition+"transition",""),!a||!lightcase.open&&c||a()},i)},15)):(t.stop(),t.animate(o,i,a)))},scroll:function(t,e,i,s){var a="in"===e,c=a?lightcase.settings.transitionIn:lightcase.settings.transitionOut,n="left",l={},o=a?0:1,r=a?"-50%":"50%",h={},g=a?1:0,d=a?"50%":"-50%";if(lightcase.open||!a){switch(c){case"scrollTop":n="top";break;case"scrollRight":r=a?"150%":"50%",d=a?"50%":"150%";break;case"scrollBottom":n="top",r=a?"150%":"50%",d=a?"50%":"150%";break;case"scrollHorizontal":r=a?"150%":"50%",d=a?"50%":"-50%";break;case"scrollVertical":n="top",r=a?"-50%":"50%",d=a?"50%":"150%"}if("prev"===lightcase.cache.action)switch(c){case"scrollHorizontal":r=a?"-50%":"50%",d=a?"50%":"150%";break;case"scrollVertical":r=a?"150%":"50%",d=a?"50%":"-50%"}l.opacity=o,l[n]=r,h.opacity=g,h[n]=d,t.css(l).show(),lightcase.support.transitions?(h[lightcase.support.transition+"transition"]=i+"ms ease",setTimeout(function(){t.css(h),setTimeout(function(){t.css(lightcase.support.transition+"transition",""),!s||!lightcase.open&&a||s()},i)},15)):(t.stop(),t.animate(h,i,s))}},zoom:function(t,e,i,s){var a="in"===e,c={},n=t.css("opacity"),l=a?"scale(0.75)":"scale(1)",o={},r=a?1:0,h=a?"scale(1)":"scale(0.75)";(lightcase.open||!a)&&(c.opacity=n,c[lightcase.support.transition+"transform"]=l,o.opacity=r,t.css(c).show(),lightcase.support.transitions?(o[lightcase.support.transition+"transform"]=h,o[lightcase.support.transition+"transition"]=i+"ms ease",setTimeout(function(){t.css(o),setTimeout(function(){t.css(lightcase.support.transition+"transform",""),t.css(lightcase.support.transition+"transition",""),!s||!lightcase.open&&a||s()},i)},15)):(t.stop(),t.animate(o,i,s)))}},callHooks:function(e){"object"==typeof e&&t.each(e,function(t,e){"function"==typeof e&&e()})},cacheObjectData:function(e){t.data(e,"cache",{id:e.attr("id"),content:e.html()}),lightcase.cache.originalObject=e},restoreObject:function(){var e=t('[id^="'+lightcase.settings.idPrefix+'temp-"]');e.attr("id",t.data(lightcase.cache.originalObject,"cache").id),e.html(t.data(lightcase.cache.originalObject,"cache").content)},resize:function(){lightcase.open&&(lightcase.isSlideshowEnabled()&&lightcase.stopTimeout(),lightcase.dimensions=lightcase.getDimensions(),lightcase.calculateDimensions(lightcase.cache.object))},cacheScrollPosition:function(){var e=t(window),i=t(document),s={top:e.scrollTop(),left:e.scrollLeft()};lightcase.cache.scrollPosition=lightcase.cache.scrollPosition||{},i.width()>e.width()&&(lightcase.cache.scrollPosition.left=s.left),i.height()>e.height()&&(lightcase.cache.scrollPosition.top=s.top)},watchResizeInteraction:function(){t(window).resize(lightcase.resize)},unwatchResizeInteraction:function(){t(window).off("resize",lightcase.resize)},watchScrollInteraction:function(){t(window).scroll(lightcase.cacheScrollPosition)},unwatchScrollInteraction:function(){t(window).off("scroll",lightcase.cacheScrollPosition)},restoreScrollPosition:function(){t(window).scrollTop(parseInt(lightcase.cache.scrollPosition.top)).scrollLeft(parseInt(lightcase.cache.scrollPosition.left)).resize()},switchToFullScreenMode:function(){lightcase.settings.shrinkFactor=1,lightcase.settings.overlayOpacity=1,t("html").addClass(lightcase.settings.classPrefix+"fullScreenMode")},lightcaseOpen:function(){switch(lightcase.open=!0,lightcase.support.transitions=lightcase.settings.cssTransitions?lightcase.isTransitionSupported():!1,lightcase.support.mobileDevice=lightcase.isMobileDevice(),lightcase.support.mobileDevice&&(t("html").addClass(lightcase.settings.classPrefix+"isMobileDevice"),lightcase.settings.fullScreenModeForMobile&&lightcase.switchToFullScreenMode()),lightcase.settings.transitionIn||(lightcase.settings.transitionIn=lightcase.settings.transition),lightcase.settings.transitionOut||(lightcase.settings.transitionOut=lightcase.settings.transition),lightcase.settings.transitionIn){case"fade":case"fadeInline":case"elastic":case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollVertical":case"scrollHorizontal":$case.is(":hidden")&&($close.css("opacity",0),$overlay.css("opacity",0),$case.css("opacity",0),$contentInner.css("opacity",0)),lightcase.transition.fade($overlay,"in",lightcase.settings.speedIn,lightcase.settings.overlayOpacity,function(){lightcase.transition.fade($close,"in",lightcase.settings.speedIn),lightcase.handleEvents(),lightcase.processContent()});break;default:lightcase.transition.fade($overlay,"in",0,lightcase.settings.overlayOpacity,function(){lightcase.transition.fade($close,"in",0),lightcase.handleEvents(),lightcase.processContent()})}t("html").addClass(lightcase.settings.classPrefix+"open"),$case.attr("aria-hidden","false")},lightcaseClose:function(){switch(lightcase.open=!1,$loading.hide(),lightcase.unbindEvents(),lightcase.unwatchResizeInteraction(),lightcase.unwatchScrollInteraction(),t("html").removeClass(lightcase.settings.classPrefix+"open"),$case.attr("aria-hidden","true"),$nav.children().hide(),lightcase.restoreScrollPosition(),lightcase.callHooks(lightcase.settings.onClose),lightcase.settings.transitionOut){case"fade":case"fadeInline":case"scrollTop":case"scrollRight":case"scrollBottom":case"scrollLeft":case"scrollHorizontal":case"scrollVertical":lightcase.transition.fade($case,"out",lightcase.settings.speedOut,0,function(){lightcase.transition.fade($overlay,"out",lightcase.settings.speedOut,0,function(){lightcase.cleanup()})});break;case"elastic":lightcase.transition.zoom($case,"out",lightcase.settings.speedOut,function(){lightcase.transition.fade($overlay,"out",lightcase.settings.speedOut,0,function(){lightcase.cleanup()})});break;default:lightcase.cleanup()}},unbindEvents:function(){$overlay.unbind("click"),t(document).unbind("keyup"),$case.unbind("swipeleft").unbind("swiperight"),$nav.children("a").unbind("click"),$close.unbind("click")},cleanupDimensions:function(){var t=$contentInner.css("opacity");$case.css({width:"",height:"",top:"",left:"","margin-top":"","margin-left":""}),$contentInner.removeAttr("style").css("opacity",t),$contentInner.children().removeAttr("style")},cleanup:function(){lightcase.cleanupDimensions(),lightcase.isSlideshowEnabled()&&(lightcase.stopTimeout(),$nav.removeClass(lightcase.settings.classPrefix+"paused")),$loading.hide(),$overlay.hide(),$case.hide(),$nav.children().hide(),$case.removeAttr("data-type"),$nav.removeAttr("data-ispartofsequence"),$contentInner.empty().hide(),$info.children().empty(),lightcase.cache.originalObject&&lightcase.restoreObject(),lightcase.callHooks(lightcase.settings.onCleanup),lightcase.cache={}}},t.fn.lightcase=function(e){return lightcase[e]?lightcase[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.lightcase"):lightcase.init.apply(this,arguments)}}(jQuery);

/* ===================================================
 *  jquery-sortable.js v0.9.13
 *  http://johnny.github.com/jquery-sortable/
 * ===================================================
 *  Copyright (c) 2012 Jonas von Andrian
 *  All rights reserved.
 *
 *  Redistribution and use in source and binary forms, with or without
 *  modification, are permitted provided that the following conditions are met:
 *  * Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *  * The name of the author may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 *
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 *  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 *  DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 *  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 *  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 *  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 *  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 *  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 *  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * ========================================================== */
!function(d,B,m,f){function v(a,b){var c=Math.max(0,a[0]-b[0],b[0]-a[1]),e=Math.max(0,a[2]-b[1],b[1]-a[3]);return c+e}function w(a,b,c,e){var k=a.length;e=e?"offset":"position";for(c=c||0;k--;){var g=a[k].el?a[k].el:d(a[k]),l=g[e]();l.left+=parseInt(g.css("margin-left"),10);l.top+=parseInt(g.css("margin-top"),10);b[k]=[l.left-c,l.left+g.outerWidth()+c,l.top-c,l.top+g.outerHeight()+c]}}function p(a,b){var c=b.offset();return{left:a.left-c.left,top:a.top-c.top}}function x(a,b,c){b=[b.left,b.top];c=
c&&[c.left,c.top];for(var e,k=a.length,d=[];k--;)e=a[k],d[k]=[k,v(e,b),c&&v(e,c)];return d=d.sort(function(a,b){return b[1]-a[1]||b[2]-a[2]||b[0]-a[0]})}function q(a){this.options=d.extend({},n,a);this.containers=[];this.options.rootGroup||(this.scrollProxy=d.proxy(this.scroll,this),this.dragProxy=d.proxy(this.drag,this),this.dropProxy=d.proxy(this.drop,this),this.placeholder=d(this.options.placeholder),a.isValidTarget||(this.options.isValidTarget=f))}function t(a,b){this.el=a;this.options=d.extend({},
z,b);this.group=q.get(this.options);this.rootGroup=this.options.rootGroup||this.group;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var c=this.rootGroup.options.itemPath;this.target=c?this.el.find(c):this.el;this.target.on(r.start,this.handle,d.proxy(this.dragInit,this));this.options.drop&&this.group.containers.push(this)}var r,z={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},n={afterMove:function(a,b,c){},containerPath:"",containerSelector:"ol, ul",distance:0,
delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",isValidTarget:function(a,b){return!0},onCancel:function(a,b,c,e){},onDrag:function(a,b,c,e){a.css(b)},onDragStart:function(a,b,c,e){a.css({height:a.outerHeight(),width:a.outerWidth()});a.addClass(b.group.options.draggedClass);d("body").addClass(b.group.options.bodyClass)},onDrop:function(a,b,c,e){a.removeClass(b.group.options.draggedClass).removeAttr("style");d("body").removeClass(b.group.options.bodyClass)},
onMousedown:function(a,b,c){if(!c.target.nodeName.match(/^(input|select|textarea)$/i))return c.preventDefault(),!0},placeholderClass:"placeholder",placeholder:'<li class="placeholder"></li>',pullPlaceholder:!0,serialize:function(a,b,c){a=d.extend({},a.data());if(c)return[b];b[0]&&(a.children=b);delete a.subContainers;delete a.sortable;return a},tolerance:0},s={},y=0,A={left:0,top:0,bottom:0,right:0};r={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",
drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"};q.get=function(a){s[a.group]||(a.group===f&&(a.group=y++),s[a.group]=new q(a));return s[a.group]};q.prototype={dragInit:function(a,b){this.$document=d(b.el[0].ownerDocument);var c=d(a.target).closest(this.options.itemSelector);c.length&&(this.item=c,this.itemContainer=b,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,n.onMousedown,a)&&(this.setPointer(a),this.toggleListeners("on"),this.setupDelayTimer(),
this.dragInitDone=!0))},drag:function(a){if(!this.dragging){if(!this.distanceMet(a)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,n.onDragStart,a);this.item.before(this.placeholder);this.dragging=!0}this.setPointer(a);this.options.onDrag(this.item,p(this.pointer,this.item.offsetParent()),n.onDrag,a);a=this.getPointer(a);var b=this.sameResultBox,c=this.options.tolerance;(!b||b.top-c>a.top||b.bottom+c<a.top||b.left-c>a.left||b.right+c<a.left)&&!this.searchValidTarget()&&
(this.placeholder.detach(),this.lastAppendedItem=f)},drop:function(a){this.toggleListeners("off");this.dragInitDone=!1;if(this.dragging){if(this.placeholder.closest("html")[0])this.placeholder.before(this.item).detach();else this.options.onCancel(this.item,this.itemContainer,n.onCancel,a);this.options.onDrop(this.item,this.getContainer(this.item),n.onDrop,a);this.clearDimensions();this.clearOffsetParent();this.lastAppendedItem=this.sameResultBox=f;this.dragging=!1}},searchValidTarget:function(a,b){a||
(a=this.relativePointer||this.pointer,b=this.lastRelativePointer||this.lastPointer);for(var c=x(this.getContainerDimensions(),a,b),e=c.length;e--;){var d=c[e][0];if(!c[e][1]||this.options.pullPlaceholder)if(d=this.containers[d],!d.disabled){if(!this.$getOffsetParent()){var g=d.getItemOffsetParent();a=p(a,g);b=p(b,g)}if(d.searchValidTarget(a,b))return!0}}this.sameResultBox&&(this.sameResultBox=f)},movePlaceholder:function(a,b,c,e){var d=this.lastAppendedItem;if(e||!d||d[0]!==b[0])b[c](this.placeholder),
this.lastAppendedItem=b,this.sameResultBox=e,this.options.afterMove(this.placeholder,a,b)},getContainerDimensions:function(){this.containerDimensions||w(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent());return this.containerDimensions},getContainer:function(a){return a.closest(this.options.containerSelector).data(m)},$getOffsetParent:function(){if(this.offsetParent===f){var a=this.containers.length-1,b=this.containers[a].getItemOffsetParent();if(!this.options.rootGroup)for(;a--;)if(b[0]!=
this.containers[a].getItemOffsetParent()[0]){b=!1;break}this.offsetParent=b}return this.offsetParent},setPointer:function(a){a=this.getPointer(a);if(this.$getOffsetParent()){var b=p(a,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=b}this.lastPointer=this.pointer;this.pointer=a},distanceMet:function(a){a=this.getPointer(a);return Math.max(Math.abs(this.pointer.left-a.left),Math.abs(this.pointer.top-a.top))>=this.options.distance},getPointer:function(a){var b=
a.originalEvent||a.originalEvent.touches&&a.originalEvent.touches[0];return{left:a.pageX||b.pageX,top:a.pageY||b.pageY}},setupDelayTimer:function(){var a=this;this.delayMet=!this.options.delay;this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){a.delayMet=!0},this.options.delay))},scroll:function(a){this.clearDimensions();this.clearOffsetParent()},toggleListeners:function(a){var b=this;d.each(["drag","drop","scroll"],function(c,e){b.$document[a](r[e],b[e+
"Proxy"])})},clearOffsetParent:function(){this.offsetParent=f},clearDimensions:function(){this.traverse(function(a){a._clearDimensions()})},traverse:function(a){a(this);for(var b=this.containers.length;b--;)this.containers[b].traverse(a)},_clearDimensions:function(){this.containerDimensions=f},_destroy:function(){s[this.options.group]=f}};t.prototype={dragInit:function(a){var b=this.rootGroup;!this.disabled&&!b.dragInitDone&&this.options.drag&&this.isValidDrag(a)&&b.dragInit(a,this)},isValidDrag:function(a){return 1==
a.which||"touchstart"==a.type&&1==a.originalEvent.touches.length},searchValidTarget:function(a,b){var c=x(this.getItemDimensions(),a,b),e=c.length,d=this.rootGroup,g=!d.options.isValidTarget||d.options.isValidTarget(d.item,this);if(!e&&g)return d.movePlaceholder(this,this.target,"append"),!0;for(;e--;)if(d=c[e][0],!c[e][1]&&this.hasChildGroup(d)){if(this.getContainerGroup(d).searchValidTarget(a,b))return!0}else if(g)return this.movePlaceholder(d,a),!0},movePlaceholder:function(a,b){var c=d(this.items[a]),
e=this.itemDimensions[a],k="after",g=c.outerWidth(),f=c.outerHeight(),h=c.offset(),h={left:h.left,right:h.left+g,top:h.top,bottom:h.top+f};this.options.vertical?b.top<=(e[2]+e[3])/2?(k="before",h.bottom-=f/2):h.top+=f/2:b.left<=(e[0]+e[1])/2?(k="before",h.right-=g/2):h.left+=g/2;this.hasChildGroup(a)&&(h=A);this.rootGroup.movePlaceholder(this,c,k,h)},getItemDimensions:function(){this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+
", ."+this.group.options.draggedClass+")").get(),w(this.items,this.itemDimensions=[],this.options.tolerance));return this.itemDimensions},getItemOffsetParent:function(){var a=this.el;return"relative"===a.css("position")||"absolute"===a.css("position")||"fixed"===a.css("position")?a:a.offsetParent()},hasChildGroup:function(a){return this.options.nested&&this.getContainerGroup(a)},getContainerGroup:function(a){var b=d.data(this.items[a],"subContainers");if(b===f){var c=this.$getChildren(this.items[a],
"container"),b=!1;c[0]&&(b=d.extend({},this.options,{rootGroup:this.rootGroup,group:y++}),b=c[m](b).data(m).group);d.data(this.items[a],"subContainers",b)}return b},$getChildren:function(a,b){var c=this.rootGroup.options,e=c[b+"Path"],c=c[b+"Selector"];a=d(a);e&&(a=a.find(e));return a.children(c)},_serialize:function(a,b){var c=this,e=this.$getChildren(a,b?"item":"container").not(this.options.exclude).map(function(){return c._serialize(d(this),!b)}).get();return this.rootGroup.options.serialize(a,
e,b)},traverse:function(a){d.each(this.items||[],function(b){(b=d.data(this,"subContainers"))&&b.traverse(a)});a(this)},_clearDimensions:function(){this.itemDimensions=f},_destroy:function(){var a=this;this.target.off(r.start,this.handle);this.el.removeData(m);this.options.drop&&(this.group.containers=d.grep(this.group.containers,function(b){return b!=a}));d.each(this.items||[],function(){d.removeData(this,"subContainers")})}};var u={enable:function(){this.traverse(function(a){a.disabled=!1})},disable:function(){this.traverse(function(a){a.disabled=
!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(a){a._clearDimensions()})},destroy:function(){this.traverse(function(a){a._destroy()})}};d.extend(t.prototype,u);d.fn[m]=function(a){var b=Array.prototype.slice.call(arguments,1);return this.map(function(){var c=d(this),e=c.data(m);if(e&&u[a])return u[a].apply(e,b)||this;e||a!==f&&"object"!==typeof a||c.data(m,new t(c,a));return this})}}(jQuery,window,"sortable");

/**
*  Ajax Autocomplete for jQuery, version 1.2.21
*  (c) 2014 Tomas Kirda
*
*  Ajax Autocomplete for jQuery is freely distributable under the terms of an MIT-style license.
*  For details, see the web site: https://github.com/devbridge/jQuery-Autocomplete
*/
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(a){"use strict";function b(c,d){var e=function(){},f=this,g={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:b.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:e,onSearchComplete:e,onSearchError:e,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(a,b,c){return-1!==a.value.toLowerCase().indexOf(c)},paramName:"query",transformResult:function(b){return"string"==typeof b?a.parseJSON(b):b},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};f.element=c,f.el=a(c),f.suggestions=[],f.badQueries=[],f.selectedIndex=-1,f.currentValue=f.element.value,f.intervalId=0,f.cachedResponse={},f.onChangeInterval=null,f.onChange=null,f.isLocal=!1,f.suggestionsContainer=null,f.noSuggestionsContainer=null,f.options=a.extend({},g,d),f.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},f.hint=null,f.hintValue="",f.selection=null,f.initialize(),f.setOptions(d)}var c=function(){return{escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(a){var b=document.createElement("div");return b.className=a,b.style.position="absolute",b.style.display="none",b}}}(),d={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};b.utils=c,a.Autocomplete=b,b.formatResult=function(a,b){var d=a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),e="("+c.escapeRegExChars(b)+")";return d.replace(new RegExp(e,"gi"),"<strong>$1</strong>")},b.prototype={killerFn:null,initialize:function(){var c,d=this,e="."+d.classes.suggestion,f=d.classes.selected,g=d.options;d.element.setAttribute("autocomplete","off"),d.killerFn=function(b){0===a(b.target).closest("."+d.options.containerClass).length&&(d.killSuggestions(),d.disableKillerFn())},d.noSuggestionsContainer=a('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),d.suggestionsContainer=b.utils.createNode(g.containerClass),c=a(d.suggestionsContainer),c.appendTo(g.appendTo),"auto"!==g.width&&c.width(g.width),c.on("mouseover.autocomplete",e,function(){d.activate(a(this).data("index"))}),c.on("mouseout.autocomplete",function(){d.selectedIndex=-1,c.children("."+f).removeClass(f)}),c.on("click.autocomplete",e,function(){d.select(a(this).data("index"))}),d.fixPositionCapture=function(){d.visible&&d.fixPosition()},a(window).on("resize.autocomplete",d.fixPositionCapture),d.el.on("keydown.autocomplete",function(a){d.onKeyPress(a)}),d.el.on("keyup.autocomplete",function(a){d.onKeyUp(a)}),d.el.on("blur.autocomplete",function(){d.onBlur()}),d.el.on("focus.autocomplete",function(){d.onFocus()}),d.el.on("change.autocomplete",function(a){d.onKeyUp(a)}),d.el.on("input.autocomplete",function(a){d.onKeyUp(a)})},onFocus:function(){var a=this;a.fixPosition(),0===a.options.minChars&&0===a.el.val().length&&a.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var a=this;a.currentRequest&&(a.currentRequest.abort(),a.currentRequest=null)},setOptions:function(b){var c=this,d=c.options;a.extend(d,b),c.isLocal=a.isArray(d.lookup),c.isLocal&&(d.lookup=c.verifySuggestionsFormat(d.lookup)),d.orientation=c.validateOrientation(d.orientation,"bottom"),a(c.suggestionsContainer).css({"max-height":d.maxHeight+"px",width:d.width+"px","z-index":d.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var a=this;a.disabled=!0,clearInterval(a.onChangeInterval),a.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var b=this,c=a(b.suggestionsContainer),d=c.parent().get(0);if(d===document.body||b.options.forceFixPosition){var e=b.options.orientation,f=c.outerHeight(),g=b.el.outerHeight(),h=b.el.offset(),i={top:h.top,left:h.left};if("auto"===e){var j=a(window).height(),k=a(window).scrollTop(),l=-k+h.top-f,m=k+j-(h.top+g+f);e=Math.max(l,m)===l?"top":"bottom"}if(i.top+="top"===e?-f:g,d!==document.body){var n,o=c.css("opacity");b.visible||c.css("opacity",0).show(),n=c.offsetParent().offset(),i.top-=n.top,i.left-=n.left,b.visible||c.css("opacity",o).hide()}"auto"===b.options.width&&(i.width=b.el.outerWidth()-2+"px"),c.css(i)}},enableKillerFn:function(){var b=this;a(document).on("click.autocomplete",b.killerFn)},disableKillerFn:function(){var b=this;a(document).off("click.autocomplete",b.killerFn)},killSuggestions:function(){var a=this;a.stopKillSuggestions(),a.intervalId=window.setInterval(function(){a.hide(),a.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var a,b=this,c=b.el.val().length,d=b.element.selectionStart;return"number"==typeof d?d===c:document.selection?(a=document.selection.createRange(),a.moveStart("character",-c),c===a.text.length):!0},onKeyPress:function(a){var b=this;if(!b.disabled&&!b.visible&&a.which===d.DOWN&&b.currentValue)return void b.suggest();if(!b.disabled&&b.visible){switch(a.which){case d.ESC:b.el.val(b.currentValue),b.hide();break;case d.RIGHT:if(b.hint&&b.options.onHint&&b.isCursorAtEnd()){b.selectHint();break}return;case d.TAB:if(b.hint&&b.options.onHint)return void b.selectHint();if(-1===b.selectedIndex)return void b.hide();if(b.select(b.selectedIndex),b.options.tabDisabled===!1)return;break;case d.RETURN:if(-1===b.selectedIndex)return void b.hide();b.select(b.selectedIndex);break;case d.UP:b.moveUp();break;case d.DOWN:b.moveDown();break;default:return}a.stopImmediatePropagation(),a.preventDefault()}},onKeyUp:function(a){var b=this;if(!b.disabled){switch(a.which){case d.UP:case d.DOWN:return}clearInterval(b.onChangeInterval),b.currentValue!==b.el.val()&&(b.findBestHint(),b.options.deferRequestBy>0?b.onChangeInterval=setInterval(function(){b.onValueChange()},b.options.deferRequestBy):b.onValueChange())}},onValueChange:function(){var b=this,c=b.options,d=b.el.val(),e=b.getQuery(d);return b.selection&&b.currentValue!==e&&(b.selection=null,(c.onInvalidateSelection||a.noop).call(b.element)),clearInterval(b.onChangeInterval),b.currentValue=d,b.selectedIndex=-1,c.triggerSelectOnValidInput&&b.isExactMatch(e)?void b.select(0):void(e.length<c.minChars?b.hide():b.getSuggestions(e))},isExactMatch:function(a){var b=this.suggestions;return 1===b.length&&b[0].value.toLowerCase()===a.toLowerCase()},getQuery:function(b){var c,d=this.options.delimiter;return d?(c=b.split(d),a.trim(c[c.length-1])):b},getSuggestionsLocal:function(b){var c,d=this,e=d.options,f=b.toLowerCase(),g=e.lookupFilter,h=parseInt(e.lookupLimit,10);return c={suggestions:a.grep(e.lookup,function(a){return g(a,b,f)})},h&&c.suggestions.length>h&&(c.suggestions=c.suggestions.slice(0,h)),c},getSuggestions:function(b){var c,d,e,f,g=this,h=g.options,i=h.serviceUrl;if(h.params[h.paramName]=b,d=h.ignoreParams?null:h.params,h.onSearchStart.call(g.element,h.params)!==!1){if(a.isFunction(h.lookup))return void h.lookup(b,function(a){g.suggestions=a.suggestions,g.suggest(),h.onSearchComplete.call(g.element,b,a.suggestions)});g.isLocal?c=g.getSuggestionsLocal(b):(a.isFunction(i)&&(i=i.call(g.element,b)),e=i+"?"+a.param(d||{}),c=g.cachedResponse[e]),c&&a.isArray(c.suggestions)?(g.suggestions=c.suggestions,g.suggest(),h.onSearchComplete.call(g.element,b,c.suggestions)):g.isBadQuery(b)?h.onSearchComplete.call(g.element,b,[]):(g.abortAjax(),f={url:i,data:d,type:h.type,dataType:h.dataType},a.extend(f,h.ajaxSettings),g.currentRequest=a.ajax(f).done(function(a){var c;g.currentRequest=null,c=h.transformResult(a,b),g.processResponse(c,b,e),h.onSearchComplete.call(g.element,b,c.suggestions)}).fail(function(a,c,d){h.onSearchError.call(g.element,b,a,c,d)}))}},isBadQuery:function(a){if(!this.options.preventBadQueries)return!1;for(var b=this.badQueries,c=b.length;c--;)if(0===a.indexOf(b[c]))return!0;return!1},hide:function(){var b=this,c=a(b.suggestionsContainer);a.isFunction(b.options.onHide)&&b.visible&&b.options.onHide.call(b.element,c),b.visible=!1,b.selectedIndex=-1,clearInterval(b.onChangeInterval),a(b.suggestionsContainer).hide(),b.signalHint(null)},suggest:function(){if(0===this.suggestions.length)return void(this.options.showNoSuggestionNotice?this.noSuggestions():this.hide());var b,c=this,d=c.options,e=d.groupBy,f=d.formatResult,g=c.getQuery(c.currentValue),h=c.classes.suggestion,i=c.classes.selected,j=a(c.suggestionsContainer),k=a(c.noSuggestionsContainer),l=d.beforeRender,m="",n=function(a){var c=a.data[e];return b===c?"":(b=c,'<div class="autocomplete-group"><strong>'+b+"</strong></div>")};return d.triggerSelectOnValidInput&&c.isExactMatch(g)?void c.select(0):(a.each(c.suggestions,function(a,b){e&&(m+=n(b,g,a)),m+='<div class="'+h+'" data-index="'+a+'">'+f(b,g)+"</div>"}),this.adjustContainerWidth(),k.detach(),j.html(m),a.isFunction(l)&&l.call(c.element,j),c.fixPosition(),j.show(),d.autoSelectFirst&&(c.selectedIndex=0,j.scrollTop(0),j.children("."+h).first().addClass(i)),c.visible=!0,void c.findBestHint())},noSuggestions:function(){var b=this,c=a(b.suggestionsContainer),d=a(b.noSuggestionsContainer);this.adjustContainerWidth(),d.detach(),c.empty(),c.append(d),b.fixPosition(),c.show(),b.visible=!0},adjustContainerWidth:function(){var b,c=this,d=c.options,e=a(c.suggestionsContainer);"auto"===d.width&&(b=c.el.outerWidth()-2,e.width(b>0?b:300))},findBestHint:function(){var b=this,c=b.el.val().toLowerCase(),d=null;c&&(a.each(b.suggestions,function(a,b){var e=0===b.value.toLowerCase().indexOf(c);return e&&(d=b),!e}),b.signalHint(d))},signalHint:function(b){var c="",d=this;b&&(c=d.currentValue+b.value.substr(d.currentValue.length)),d.hintValue!==c&&(d.hintValue=c,d.hint=b,(this.options.onHint||a.noop)(c))},verifySuggestionsFormat:function(b){return b.length&&"string"==typeof b[0]?a.map(b,function(a){return{value:a,data:null}}):b},validateOrientation:function(b,c){return b=a.trim(b||"").toLowerCase(),-1===a.inArray(b,["auto","bottom","top"])&&(b=c),b},processResponse:function(a,b,c){var d=this,e=d.options;a.suggestions=d.verifySuggestionsFormat(a.suggestions),e.noCache||(d.cachedResponse[c]=a,e.preventBadQueries&&0===a.suggestions.length&&d.badQueries.push(b)),b===d.getQuery(d.currentValue)&&(d.suggestions=a.suggestions,d.suggest())},activate:function(b){var c,d=this,e=d.classes.selected,f=a(d.suggestionsContainer),g=f.find("."+d.classes.suggestion);return f.find("."+e).removeClass(e),d.selectedIndex=b,-1!==d.selectedIndex&&g.length>d.selectedIndex?(c=g.get(d.selectedIndex),a(c).addClass(e),c):null},selectHint:function(){var b=this,c=a.inArray(b.hint,b.suggestions);b.select(c)},select:function(a){var b=this;b.hide(),b.onSelect(a)},moveUp:function(){var b=this;if(-1!==b.selectedIndex)return 0===b.selectedIndex?(a(b.suggestionsContainer).children().first().removeClass(b.classes.selected),b.selectedIndex=-1,b.el.val(b.currentValue),void b.findBestHint()):void b.adjustScroll(b.selectedIndex-1)},moveDown:function(){var a=this;a.selectedIndex!==a.suggestions.length-1&&a.adjustScroll(a.selectedIndex+1)},adjustScroll:function(b){var c=this,d=c.activate(b);if(d){var e,f,g,h=a(d).outerHeight();e=d.offsetTop,f=a(c.suggestionsContainer).scrollTop(),g=f+c.options.maxHeight-h,f>e?a(c.suggestionsContainer).scrollTop(e):e>g&&a(c.suggestionsContainer).scrollTop(e-c.options.maxHeight+h),c.options.preserveInput||c.el.val(c.getValue(c.suggestions[b].value)),c.signalHint(null)}},onSelect:function(b){var c=this,d=c.options.onSelect,e=c.suggestions[b];c.currentValue=c.getValue(e.value),c.currentValue===c.el.val()||c.options.preserveInput||c.el.val(c.currentValue),c.signalHint(null),c.suggestions=[],c.selection=e,a.isFunction(d)&&d.call(c.element,e)},getValue:function(a){var b,c,d=this,e=d.options.delimiter;return e?(b=d.currentValue,c=b.split(e),1===c.length?a:b.substr(0,b.length-c[c.length-1].length)+a):a},dispose:function(){var b=this;b.el.off(".autocomplete").removeData("autocomplete"),b.disableKillerFn(),a(window).off("resize.autocomplete",b.fixPositionCapture),a(b.suggestionsContainer).remove()}},a.fn.autocomplete=a.fn.devbridgeAutocomplete=function(c,d){var e="autocomplete";return 0===arguments.length?this.first().data(e):this.each(function(){var f=a(this),g=f.data(e);"string"==typeof c?g&&"function"==typeof g[c]&&g[c](d):(g&&g.dispose&&g.dispose(),g=new b(this,c),f.data(e,g))})}});

/*! jQuery Responsive Menu 2015-06-14 version: 0.2.1 */
!function(a,b,c,d,e){"use strict";var f="rMenu",g=function(c,d){var e=this;e.optionsInit={minWidth:"769px",transitionSpeed:400,jqueryEasing:"swing",css3Easing:"ease",toggleBtnBool:!0,toggleSel:".rm-toggle",menuSel:"ul",menuItemsSel:"li",animateBool:!0,accelerateBool:!1,setupCallback:!1,tabindexStart:1,developmentMode:!1},e.options=a.extend({},e.optionsInit,d),e.tButton=a(e.options.toggleSel),e.tButtonClass="rm-button",e.tButtonShowClass="rm-show",e.tButtonActiveClass="rm-active",e.el=a(c),e.navElementClass="rm-nav",e.container=e.el.parent(),e.containerClass="rm-container",e.expandedClass="rm-layout-expanded",e.contractedClass="rm-layout-contracted",e.noJSClass="rm-nojs",e.menus=e.el.find(e.options.menuSel),e.menuClass="rm-menu",e.topMenu=e.el.children(e.options.menuSel),e.topMenuClass="rm-top-menu",e.menuExpandedClass="rm-menu-expanded",e.menuHiddenClass="accessibly-hidden",e.menuCalcClass="rm-calculate",e.menuItemClass="rm-menu-item",e.itemFocused=!1,e.parentClass="rm-parent",e.itemHoverClass="rm-hover",e.itemFirst="rm-first",e.itemLast="rm-last",e.item2ndLast="rm-2nd-last",e.animateClass="rm-css-animate",e.animateBool=e.options.animateBool,e.accelerateClass="rm-accelerate",e.accelerateBool=e.options.accelerateBool,e.touchMoveBool=!1,e.timer=!1,e.windowWidth=a(b).width(),e.init=function(){return e.setup(),a(b).on({resize:function(){a(b).width()!==e.windowWidth&&(e.windowWidth=a(b).width(),clearTimeout(e.timer),e.timer=setTimeout(e.adjust,500))}}),"function"==typeof e.options.setupCallback&&e.options.setupCallback(),this},e.setup=function(){return e.container.addClass(e.containerClass),e.options.toggleBtnBool?e.tButton.addClass(e.tButtonClass):e.tButton.removeClass(e.tButtonClass),e.tButton.removeClass(e.noJSClass).off("mousedown.rm focusin.rm click.rm").on("mousedown.rm focusin.rm",f).on("click.rm",g).attr("tabindex",0),e.menus.addClass(e.menuClass).attr("aria-hidden","false").hide(),e.topMenu.addClass(e.topMenuClass),e.animateBool?"undefined"!=typeof Modernizr?Modernizr.csstransitions?Modernizr.csstransforms3d||(e.accelerateBool=!1):(e.animateBool=!1,e.accelerateBool=!1):i()?h()||(e.accelerateBool=!1):(e.animateBool=!1,e.accelerateBool=!1):e.accelerateBool=!1,e.animateBool&&(e.menus.addClass(e.animateClass),e.accelerateBool&&e.menus.addClass(e.accelerateClass)),e.el.removeClass(e.noJSClass).addClass(e.navElementClass).off("focusin.rm focusout.rm click.rm touchend.rm touchmove.rm").on("focusin.rm",e.options.menuItemsSel,l).on("focusout.rm",e.topMenu,n).on("click.rm touchend.rm",e.options.menuItemsSel,k).on("touchmove.rm",e.options.menuItemsSel,m).find(e.options.menuItemsSel).each(function(){var b=a(this);b.addClass(e.menuItemClass).children("a").attr("tabindex",0),b.is(":first-child")&&b.addClass(e.itemFirst),b.is(":last-child")&&b.addClass(e.itemLast).prev().addClass(e.item2ndLast)}).addBack().removeClass(e.parentClass).has(e.options.menuSel).addClass(e.parentClass),e.adjust(),this},e.adjust=function(c){c="undefined"!=typeof c?c:e.options.minWidth,"undefined"!=typeof Modernizr&&Modernizr.mq("only all")?(e.options.developmentMode&&console.log("Modernizr: MQ supported"),Modernizr.mq("( min-width: "+c+" )")?e.layoutExpanded():e.layoutContracted()):(e.options.developmentMode&&console.log("unable to detect MQ support"),a(b).outerWidth()<parseInt(c)?e.layoutContracted():e.layoutExpanded())},e.layoutContracted=function(){return e.container.hasClass(e.contractedClass)||(n({type:"layoutContracted"}),e.container.removeClass(e.expandedClass).addClass(e.contractedClass).find("."+e.itemHoverClass).removeClass(e.itemHoverClass),e.animateBool&&e.calculateHeights(),e.el.off("mouseenter.le mouseleave.le"),e.tButton.addClass(e.tButtonShowClass),e.tButton.hasClass(e.tButtonActiveClass)?(e.topMenu.removeClass(e.menuHiddenClass).show().addClass(e.menuExpandedClass),e.animateBool&&e.topMenu.css({"max-height":"none"})):e.topMenu.addClass(e.menuHiddenClass).show().removeClass(e.menuExpandedClass)),e.options.developmentMode&&console.log("responsive-menu: contracted layout"),this},e.layoutExpanded=function(){return e.container.hasClass(e.expandedClass)||(n({type:"layoutExpanded"}),e.container.removeClass(e.contractedClass).addClass(e.expandedClass).find("."+e.itemHoverClass).removeClass(e.itemHoverClass),e.animateBool&&e.calculateHeights(),e.el.off("mouseenter.le mouseleave.le").on("mouseenter.le",e.options.menuItemsSel,l).on("mouseleave.le",e.options.menuItemsSel,o).on("mouseleave.le",e.topMenu,n),e.tButton.removeClass(e.tButtonShowClass),e.topMenu.removeClass(e.menuHiddenClass).show().addClass(e.menuExpandedClass),e.animateBool&&e.topMenu.css({"max-height":"none",overflow:"visible"})),e.options.developmentMode&&console.log("responsive-menu: expanded layout"),this},e.calculateHeights=function(){return e.menus.addClass(e.menuCalcClass).removeClass(e.menuExpandedClass).attr("style","").show(0),e.menus.each(function(){var b=a(this);b.data("height",b.height())}).css({"max-height":"0"}).removeClass(e.menuCalcClass),this},e.toggleMenu=function(b){r(e.topMenu),e.topMenu.hasClass(e.menuHiddenClass)?(a(b).addClass(e.tButtonActiveClass),e.topMenu.removeClass(e.menuHiddenClass),e.animateBool?e.topMenu.css("max-height","0"):e.topMenu.hide(0),s(e.el)):(a(b).removeClass(e.tButtonActiveClass),r(e.container))};var f=function(b){b.stopPropagation();a(b.target);clearTimeout(e.timer),e.timer=setTimeout(function(){e.toggleMenu(b.target)},100)},g=function(a){a.preventDefault(),a.stopPropagation()},k=function(b){var c=a(b.currentTarget);b.stopPropagation(),!c.hasClass(e.itemHoverClass)&&c.hasClass(e.parentClass)||e.touchMoveBool?"touchend"!==b.type&&b.preventDefault():(location.href=c.children("a").attr("href"),n(b)),e.touchMoveBool=!1},l=function(b){var c=a(b.currentTarget);b.stopPropagation(),"focusin"!==b.type&&c.children("a").not(":focus").focus(),e.itemFocused=c,clearTimeout(e.timer),e.timer=setTimeout(function(){e.tButton.hasClass(e.tButtonShowClass)&&!e.tButton.hasClass(e.tButtonActiveClass)&&e.toggleMenu(e.tButton.get(0)),c.hasClass(e.parentClass)?c.hasClass(e.itemHoverClass)||(r(c.parent()),s(c)):r(c.parent())},100)},m=function(){e.touchMoveBool=!0},n=function(a){a=a||{type:"callback"},clearTimeout(e.timer),e.timer=setTimeout(function(){e.itemFocused&&(e.itemFocused.children("a").blur(),e.itemFocused=!1),r(e.topMenu)},100)},o=function(b){var c=a(b.currentTarget);clearTimeout(e.timer),e.timer=setTimeout(function(){c.parent().parent().children("a").focus()},100)},p=function(b){if("max-height"===b.originalEvent.propertyName){var c=a(b.currentTarget);b.stopPropagation(),c.css({transition:"","max-height":"0",overflow:"hidden"}).removeClass(e.menuExpandedClass).off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd").parent().find("."+e.itemHoverClass).addBack().removeClass(e.itemHoverClass),c.hasClass(e.topMenuClass)&&c.addClass(e.menuHiddenClass).show(0),j(e.itemFocused)}},q=function(b){if("max-height"===b.originalEvent.propertyName){var c=a(b.currentTarget);b.stopPropagation(),c.removeClass(e.menuHiddenClass).css({transition:"","max-height":"none",overflow:"visible"}).addClass(e.menuExpandedClass).off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),c.parent("."+e.parentClass).addClass(e.itemHoverClass),j(e.itemFocused)}},r=function(b){var c=b.find(e.options.menuSel);e.animateBool?(c.each(function(){var b=a(this);0!==b.height()?b.css({"max-height":b.height(),transition:"max-height "+String(e.options.transitionSpeed/1e3)+"s "+e.options.css3Easing,overflow:"hidden"}).on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",p):c.not(b)}),c.hide(0).show(0),c.css({"max-height":"0"}).removeClass(e.menuExpandedClass)):c.each(function(){var b=a(this);0!==b.height()&&b.slideUp(e.options.transitionSpeed,e.options.jqueryEasing,function(){b.css("overflow","visible").removeClass(e.menuExpandedClass).parent("."+e.parentClass).removeClass(e.itemHoverClass),b.hasClass(e.topMenuClass)&&e.topMenu.addClass(e.menuHiddenClass),j(e.itemFocused)})})},s=function(a){var b=a.children(e.options.menuSel);a.siblings("."+e.itemHoverClass).removeClass(e.itemHoverClass),e.animateBool?b.css({transition:"max-height "+String(e.options.transitionSpeed/1e3)+"s "+e.options.css3Easing,"max-height":b.data("height")}).on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",q):b.slideDown(e.options.transitionSpeed,e.options.jqueryEasing,function(){a.addClass(e.itemHoverClass),b.addClass(e.menuExpandedClass).css("overflow","visible"),console.log("jquery expand"),j(e.itemFocused)})};return e.init(c),this};a.fn[f]=function(b){return this.each(function(){var c=a(this);c.data(f)||c.data(f,new g(this,b))})};var h=function(){var a,d=c.createElement("p"),f={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};c.body.insertBefore(d,null);for(var g in f)d.style[g]!==e&&(d.style[g]="translate3d(1px,1px,1px)",a=b.getComputedStyle(d).getPropertyValue(f[g]));return c.body.removeChild(d),a!==e&&a.length>0&&"none"!==a},i=function(){var a=c.body||c.documentElement,b=a.style,d="transition";if("string"==typeof b[d])return!0;var e=["Moz","webkit","Webkit","Khtml","O","ms"];d=d.charAt(0).toUpperCase()+d.substr(1);for(var f=0;f<e.length;f++)if("string"==typeof b[e[f]+d])return!0;return!1},j=function(c){if(c.length){var d=a(b).scrollTop(),e=d+a(b).height(),f=c.offset().top,g=f+c.outerHeight();(g>e||d>f)&&a("html, body").animate({scrollTop:f},"slow")}}}(jQuery,window,document,Math);


//Recherche d'une chaîne dans une autre.
function strpos(haystack, needle)
{
    var i = haystack.indexOf(needle, 0); // returns -1
    return i >= 0 ? i : false;
}

//Affichage/Masquage de la balise hide.
function bb_hide(div2)
{
	var divs = div2.getElementsByTagName('div');
	var div3 = divs[0];
	if (div3.style.visibility == 'visible')
	{
		div3.style.visibility = 'hidden';
		div2.style.height = '10px';
		div2.style.overflow = 'hidden';
	}
	else
	{	
		div3.style.visibility = 'visible';
		div2.style.height = 'auto';
		div2.style.overflow = 'auto';
	}
	
	return true;
}

//Barre de progression, 
function change_progressbar(id_element, value, informations) {
	var progress_bar_el = jQuery('#' + id_element).children('.progressbar').css('width', value + '%');

	if (informations) {
		jQuery('#' + id_element).children('.progressbar-infos').text(informations);
	}
	else {
		jQuery('#' + id_element).children('.progressbar-infos').text(value + '%');
	}
}

//Fonction de préparation de l'ajax.
function xmlhttprequest_init(filename)
{
	var xhr_object = null;
	if (window.XMLHttpRequest) //Firefox
	   xhr_object = new XMLHttpRequest();
	else if (window.ActiveXObject) //Internet Explorer
	   xhr_object = new ActiveXObject("Microsoft.XMLHTTP");

	xhr_object.open('POST', filename, true);

	return xhr_object;
}

//Fonction ajax d'envoi.
function xmlhttprequest_sender(xhr_object, data)
{
	xhr_object.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
	xhr_object.send(data);
}

//Echape les variables de type chaînes dans les requêtes xmlhttprequest.
function escape_xmlhttprequest(contents)
{
	contents = contents.replace(/\+/g, '%2B');
	contents = contents.replace(/&/g, '%26');
	
	return contents;
}

//Fonction de recherche des membres.
function XMLHttpRequest_search_members(searchid, theme, insert_mode, alert_empty_login)
{
	var login = jQuery('#login' + searchid).val();
	if( login != "" )
	{
		if (jQuery('#search_img' + searchid))
			jQuery('#search_img' + searchid).append('<i class="fa fa-spinner fa-spin"></i>');

		jQuery.ajax({
			url: PATH_TO_ROOT + '/kernel/framework/ajax/member_xmlhttprequest.php?' + insert_mode + '=1',
			type: "post",
			dataType: "html",
			data: {'login': login, 'divid' : searchid, 'token' : TOKEN},
			success: function(returnData){
				if (jQuery('#search_img' + searchid))
					jQuery('#search_img' + searchid).children("i").remove();

				if (jQuery("#xmlhttprequest-result-search" + searchid))
					jQuery("#xmlhttprequest-result-search" + searchid).html(returnData);

				jQuery("#xmlhttprequest-result-search" + searchid).fadeIn();
			},
			error: function(e){
				jQuery('#search_img' + searchid).children("i").remove();
			}
		});
	}	
	else
		alert(alert_empty_login);
}

//Pour savoir si une fonction existe
function functionExists(function_name)
{
    // http://kevin.vanzonneveld.net
    // +   original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   improved by: Steve Clay
    // +   improved by: Legaev Andrey
    // *     example 1: function_exists('isFinite');
    // *     returns 1: true 
    if (typeof function_name == 'string')
    {
        return (typeof window[function_name] == 'function');
    }
    else
    {
        return (function_name instanceof Function);
    }
}

//Includes synchronously a js file
function include(file)
{
	if (window.document.getElementsByTagName)
	{
		script = window.document.createElement("script");
		script.type = "text/javascript";
		script.src = file;
		document.documentElement.firstChild.appendChild(script);
	}
}

//Affiche le lecteur vidéo avec la bonne URL, largeur et hauteur
playerflowPlayerRequired = false;
function insertMoviePlayer(id)
{
	if (!playerflowPlayerRequired)
	{
		include(PATH_TO_ROOT + '/kernel/lib/flash/flowplayer/flowplayer.js');
		playerflowPlayerRequired = true;
	}
	flowPlayerDisplay(id);
}

//Construit le lecteur à partir du moment où son code a été interprété par l'interpréteur javascript
function flowPlayerDisplay(id)
{
	//Construit et affiche un lecteur vidéo de type flowplayer
	//Si la fonction n'existe pas, on attend qu'elle soit interprétée
	if (!functionExists('flowplayer'))
	{
		setTimeout('flowPlayerDisplay(\'' + id + '\')', 100);
		return;
	}
	//On lance le flowplayer
	flowplayer(id, PATH_TO_ROOT + '/kernel/lib/flash/flowplayer/flowplayer.swf', { 
		    clip: { 
		        url: jQuery('#' + id).attr('href'),
		        autoPlay: false 
		    }
	    }
	);
}

var delay = 300; //Délai après lequel le bloc est automatiquement masqué, après le départ de la souris.
var timeout;
var displayed = false;
var previous_bblock;

//Affiche le bloc.
function bb_display_block(divID, field)
{
	var i;
	
	if( timeout )
		clearTimeout(timeout);
	
	var block = document.getElementById('bb-block' + divID + field);
	if( block.style.display == 'none' )
	{
		if( document.getElementById(previous_bblock) )
			document.getElementById(previous_bblock).style.display = 'none';
		block.style.display = 'block';
		displayed = true;
		previous_bblock = 'bb-block' + divID + field;
	}
	else
	{
		block.style.display = 'none';
		displayed = false;
	}
}

//Cache le bloc.
function bb_hide_block(bbfield, field, stop)
{	
	if( stop && timeout )
	{	
		clearTimeout(timeout);
	}
	else if( displayed )
	{
		clearTimeout(timeout);
		timeout = setTimeout('bb_display_block(\'' + bbfield + '\',  \'' + field + '\')', delay);
	}	
}